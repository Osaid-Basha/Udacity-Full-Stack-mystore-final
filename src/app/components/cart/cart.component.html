<section class="container">
  <h2>Shopping Cart</h2>

  <div *ngIf="items.length === 0" class="alert alert-info">
    Your cart is empty. <a routerLink="/" class="alert-link">Continue shopping</a>
  </div>

  <div *ngIf="items.length > 0">
    <div class="table-responsive mb-4">
      <table class="table align-middle">
        <thead class="table-light">
        <tr>
          <th>Product</th>
          <th class="text-center">Quantity</th>
          <th class="text-end">Price</th>
          <th class="text-end">Subtotal</th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of items">
          <td>
            <div class="d-flex align-items-center gap-3">
              <img [src]="item.product.image" [alt]="item.product.name"
                   class="cart-product-image">
              <div>
                <div class="fw-bold">{{ item.product.name }}</div>
                <div class="text-muted small">{{ item.product.description }}</div>
              </div>
            </div>
          </td>
          <td class="text-center">
            <input type="number"
                   class="form-control form-control-sm w-auto mx-auto"
                   [value]="item.qty"
                   (change)="updateQty(item, $any($event.target).value)"
                   min="1">
          </td>
          <td class="text-end">{{ item.product.price | currency }}</td>
          <td class="text-end">{{ getSubtotal(item) | currency }}</td>
          <td class="text-end">
            <button class="btn btn-sm btn-outline-danger"
                    (click)="removeItem(item.product.id)">
              Remove
            </button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-between align-items-center border-top pt-3">
      <div>
        <a routerLink="/" class="btn btn-outline-secondary">
          ‚Üê Continue Shopping
        </a>
      </div>
      <div class="text-end">
        <div class="mb-2 fs-5">
          <strong>Total: {{ total | currency }}</strong>
        </div>
        <a routerLink="/checkout" class="btn btn-primary btn-lg">
          Proceed to Checkout
        </a>
      </div>
    </div>
  </div>
</section>
